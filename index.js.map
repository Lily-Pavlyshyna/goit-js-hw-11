{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '47567407-25ef3519c02546aa2529f6321';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 9) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page.toString(),\n    per_page: perPage.toString(),\n  });\n\n  const url = `${BASE_URL}?${params}`;\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`Error: ${response.status} ${response.statusText}`);\n    }\n    return await response.json();\n  } catch (error) {\n    iziToast.error({\n      title: 'Fetch Error',\n      message: `Something went wrong: ${error.message}`,\n      position: 'topRight',\n      theme: 'dark',\n      backgroundolor: 'red',\n    });\n    throw error;\n  }\n}\n","export function renderGallery(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <a class=\"gallery-item\" href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          <div class=\"info\">\n            <p><b>Likes:</b> ${likes}</p>\n            <p><b>Views:</b> ${views}</p>\n            <p><b>Comments:</b> ${comments}</p>\n            <p><b>Downloads:</b> ${downloads}</p>\n          </div>\n        </a>\n      `\n    )\n    .join('');\n}\n\nexport function clearGallery(container) {\n  container.innerHTML = '';\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, clearGallery } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.search-form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nlet page = 1;\nconst perPage = 9;\nlet lightbox;\n\nform.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  const query = e.currentTarget.elements.searchQuery.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      message: 'Please enter a search query!',\n      position: 'topRight',\n      theme: 'dark',\n      backgroundColor: 'red',\n    });\n    return;\n  }\n\n  page = 1;\n  clearGallery(galleryContainer);\n\n  try {\n    toggleLoader(true);\n    const { hits, totalHits } = await fetchImages(query, page, perPage);\n\n    if (!hits.length) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query.',\n        position: 'topRight',\n        theme: 'dark',\n        backgroundColor: 'red',\n      });\n      return;\n    }\n\n    galleryContainer.insertAdjacentHTML('beforeend', renderGallery(hits));\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n\n    iziToast.success({\n      message: `Found ${totalHits} images!`,\n      position: 'topRight',\n      theme: 'dark',\n    });\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n      theme: 'dark',\n      backgroundColor: 'red',\n    });\n  } finally {\n    toggleLoader(false);\n  }\n}\n\nfunction toggleLoader(isLoading) {\n  loader.style.display = isLoading ? 'block' : 'none';\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","params","url","response","error","renderGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","container","form","galleryContainer","loader","lightbox","onFormSubmit","e","iziToast","toggleLoader","hits","totalHits","SimpleLightbox","isLoading"],"mappings":"wvBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,EAAG,CAC9D,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EAAK,SAAU,EACrB,SAAUC,EAAQ,SAAU,CAChC,CAAG,EAEKE,EAAM,GAAGN,CAAQ,IAAIK,CAAM,GACjC,GAAI,CACF,MAAME,EAAW,MAAM,MAAMD,CAAG,EAChC,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,UAAUA,EAAS,MAAM,IAAIA,EAAS,UAAU,EAAE,EAEpE,OAAO,MAAMA,EAAS,MACvB,OAAQC,EAAO,CACd,eAAS,MAAM,CACb,MAAO,cACP,QAAS,yBAAyBA,EAAM,OAAO,GAC/C,SAAU,WACV,MAAO,OACP,eAAgB,KACtB,CAAK,EACKA,CACP,CACH,CC/BO,SAASC,EAAcC,EAAQ,CACpC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA,wCAC4BL,CAAa;AAAA,sBAC/BD,CAAY,UAAUE,CAAI;AAAA;AAAA,+BAEjBC,CAAK;AAAA,+BACLC,CAAK;AAAA,kCACFC,CAAQ;AAAA,mCACPC,CAAS;AAAA;AAAA;AAAA,OAIvC,EACA,KAAK,EAAE,CACZ,CAEO,SAASC,EAAaC,EAAW,CACtCA,EAAU,UAAY,EACxB,CCrBA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAInB,EAAO,EACX,MAAMC,EAAU,EAChB,IAAImB,EAEJH,EAAK,iBAAiB,SAAUI,CAAY,EAE5C,eAAeA,EAAaC,EAAG,CAC7BA,EAAE,eAAc,EAChB,MAAMvB,EAAQuB,EAAE,cAAc,SAAS,YAAY,MAAM,OAEzD,GAAI,CAACvB,EAAO,CACVwB,EAAS,MAAM,CACb,QAAS,+BACT,SAAU,WACV,MAAO,OACP,gBAAiB,KACvB,CAAK,EACD,MACD,CAEDvB,EAAO,EACPe,EAAaG,CAAgB,EAE7B,GAAI,CACFM,EAAa,EAAI,EACjB,KAAM,CAAE,KAAAC,EAAM,UAAAC,GAAc,MAAM5B,EAAYC,EAAOC,EAAMC,CAAO,EAElE,GAAI,CAACwB,EAAK,OAAQ,CAChBF,EAAS,MAAM,CACb,QAAS,yDACT,SAAU,WACV,MAAO,OACP,gBAAiB,KACzB,CAAO,EACD,MACD,CAEDL,EAAiB,mBAAmB,YAAaZ,EAAcmB,CAAI,CAAC,EACpEL,EAAW,IAAIO,EAAe,aAAc,CAC1C,aAAc,MACd,gBAAiB,SACjB,aAAc,GACpB,CAAK,EACDP,EAAS,QAAO,EAEhBG,EAAS,QAAQ,CACf,QAAS,SAASG,CAAS,WAC3B,SAAU,WACV,MAAO,MACb,CAAK,CACF,MAAe,CACdH,EAAS,MAAM,CACb,QAAS,gDACT,SAAU,WACV,MAAO,OACP,gBAAiB,KACvB,CAAK,CACL,QAAY,CACRC,EAAa,EAAK,CACnB,CACH,CAEA,SAASA,EAAaI,EAAW,CAC/BT,EAAO,MAAM,QAAUS,EAAY,QAAU,MAC/C"}